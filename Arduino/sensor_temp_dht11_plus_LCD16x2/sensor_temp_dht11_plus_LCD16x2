#include <LiquidCrystal_I2C.h>
#include <Keypad.h>
#include "DHT.h"
#define DHTPIN 16
#define DHTTYPE DHT11


LiquidCrystal_I2C lcd(0x27,16,2);

DHT dht(DHTPIN, DHTTYPE);

const byte ROWS = 4; //4 linhas 
const byte COLS = 4; //4 colunas 
//definir os simbolos dos botões
char hexaKeys[ROWS][COLS]  {
  {'1','2','3','A'},
  {'4','5','6','B'},
  {'7','8','9','C'},
  {'*','0','#','D'}
};
byte rowPins[ROWS] = {13, 12, 14, 27}; 

byte colPins[COLS] = {4, 5, 18, 19};


Keypad keypad = Keypad( makeKeymap(hexaKeys), rowPins, colPins, ROWS, COLS); 
 
 void setup (){
  
 Serial.begin(9600);
dht.begin();
lcd.init();              
lcd.backlight(); 
lcd.setCursor(0,0);
  lcd.print ("");
 }

void loop() {

char key = keypad.getKey();

if (key) {
    lcd.print(key);
    }
    
  else if (key=='C'){
lcd.clear();
lcd.setCursor(0,0);
lcd.print("");
 
 }


   else if (key == 'A'){
lcd.clear();
     
      float h = dht.readHumidity();
      float t = dht.readTemperature();
      float hic = dht.computeHeatIndex(t, h, false);
    
    if (isnan(h) || isnan(t)) {
            lcd.print(F("Erro na leitura"));
            return;
    }
            
lcd.print(F("   Humidade: "));
  lcd.setCursor(5,1);
  lcd.print(h);
  lcd.print("%");
  delay(2000);
  
  lcd.clear();
  
  lcd.print(F("  Temperatura: "));
  lcd.setCursor(5,1);
  lcd.print(t);
  lcd.print(F("C"));
  delay(2000);
  lcd.clear();
  
  
  lcd.print(F("  Sensação térmica: "));
  lcd.setCursor(5,1);
  lcd.print(hic);
  lcd.print(F("C"));
  delay(2000);
}

}
  
